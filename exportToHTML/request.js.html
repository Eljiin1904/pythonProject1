<html>
<head>
<title>request.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #6a8759;}
.s3 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
request.js</font>
</center></td></tr></table>
<pre><span class="s0">var </span><span class="s1">monthNames = [</span><span class="s2">&quot;Jan&quot;</span><span class="s1">, </span><span class="s2">&quot;Feb&quot;</span><span class="s1">, </span><span class="s2">&quot;Mar&quot;</span><span class="s1">, </span><span class="s2">&quot;Apr&quot;</span><span class="s1">, </span><span class="s2">&quot;May&quot;</span><span class="s1">, </span><span class="s2">&quot;Jun&quot;</span><span class="s1">, </span><span class="s2">&quot;Jul&quot;</span><span class="s1">, </span><span class="s2">&quot;Aug&quot;</span><span class="s1">, </span><span class="s2">&quot;Sep&quot;</span><span class="s1">, </span><span class="s2">&quot;Oct&quot;</span><span class="s1">, </span><span class="s2">&quot;Nov&quot;</span><span class="s1">, </span><span class="s2">&quot;Dec&quot;</span><span class="s1">];</span>

<span class="s1">$(document).ready(</span><span class="s0">function</span><span class="s1">() {</span>
    <span class="s1">$(</span><span class="s2">&quot;abbr.timeago&quot;</span><span class="s1">).timeago();</span>
<span class="s1">});</span>

<span class="s0">function </span><span class="s1">showTooltip(x, y, contents) {</span>
    <span class="s1">$(</span><span class="s2">&quot;#tooltip&quot;</span><span class="s1">).remove();</span>
    
    <span class="s1">$(</span><span class="s2">'&lt;div id=&quot;tooltip&quot;&gt;' </span><span class="s1">+ contents + </span><span class="s2">'&lt;/div&gt;'</span><span class="s1">).css( {</span>
        <span class="s1">position: </span><span class="s2">'absolute'</span><span class="s1">,</span>
        <span class="s1">display: </span><span class="s2">'none'</span><span class="s1">,</span>
        <span class="s1">top: y + </span><span class="s3">5</span><span class="s1">,</span>
        <span class="s1">left: x + </span><span class="s3">5</span><span class="s1">,</span>
        <span class="s1">border: </span><span class="s2">'1px solid #ccc'</span><span class="s1">,</span>
        <span class="s1">padding: </span><span class="s2">'5px'</span><span class="s1">,</span>
        <span class="s2">'background-color'</span><span class="s1">: </span><span class="s2">'#7CA0C7'</span><span class="s1">,</span>
        <span class="s2">'color'</span><span class="s1">: </span><span class="s2">'#fff'</span><span class="s1">,</span>
        <span class="s1">opacity: </span><span class="s3">0.80</span>
    <span class="s1">}).appendTo(</span><span class="s2">&quot;body&quot;</span><span class="s1">).fadeIn(</span><span class="s3">200</span><span class="s1">);</span>
<span class="s1">}</span>

<span class="s0">var </span><span class="s1">previousPoint = </span><span class="s0">null</span><span class="s1">;</span>
<span class="s0">var </span><span class="s1">date = </span><span class="s0">new </span><span class="s1">Date();</span>

<span class="s0">function </span><span class="s1">trafficGraph(placeholder, data) {</span>
    <span class="s0">var </span><span class="s1">plot = $.plot(placeholder, data, {xaxis:{mode:</span><span class="s2">'time'</span><span class="s1">}, points:{show:</span><span class="s0">true</span><span class="s1">}, lines:{show:</span><span class="s0">true</span><span class="s1">}, grid:{hoverable:</span><span class="s0">true</span><span class="s1">}});</span>
    
    <span class="s1">placeholder.bind(</span><span class="s2">&quot;plothover&quot;</span><span class="s1">, </span><span class="s0">function </span><span class="s1">(event, pos, item) {</span>
        <span class="s0">if </span><span class="s1">(item) {</span>
            <span class="s0">if </span><span class="s1">(previousPoint != item.datapoint) {</span>
                <span class="s1">previousPoint = item.datapoint;</span>
                
                <span class="s1">date.setTime(item.datapoint[</span><span class="s3">0</span><span class="s1">]).toString;</span>
                <span class="s1">showTooltip(item.pageX, item.pageY, item.series.label + </span><span class="s2">' on ' </span><span class="s1">+ monthNames[date.getMonth()] + </span><span class="s2">' ' </span><span class="s1">+ date.getDate() + </span><span class="s2">' is ' </span><span class="s1">+ item.datapoint[</span><span class="s3">1</span><span class="s1">]);</span>
            <span class="s1">}</span>
        <span class="s1">} </span><span class="s0">else </span><span class="s1">{</span>
            <span class="s1">$(</span><span class="s2">&quot;#tooltip&quot;</span><span class="s1">).remove();</span>
            <span class="s1">previousPoint = </span><span class="s0">null</span><span class="s1">;</span>
        <span class="s1">}</span>
    <span class="s1">});</span>
<span class="s1">}</span>
</pre>
</body>
</html>